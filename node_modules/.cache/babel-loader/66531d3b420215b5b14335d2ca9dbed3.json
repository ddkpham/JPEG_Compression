{"ast":null,"code":"import _toConsumableArray from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jennypham/Desktop/cmpt365/assignment2/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jennypham/Desktop/cmpt365/assignment2/src/containers/ImageManager/ImageManager.js\";\nimport React, { Component } from 'react';\nimport classes from './ImageManager.module.css';\nimport Aux from '../../hoc/Aux';\nimport ImageControl from '../../component/Image/ImageControls/ImageControl';\nimport Modal from '../../component/UI/Modal/Modal';\nimport CompressProcess from '../../component/Image/CompressProcess/CompressProcess';\nimport axios from 'axios';\n\nvar ImageManager =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ImageManager, _Component);\n\n  function ImageManager() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ImageManager);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ImageManager)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      images: [{\n        id: '1',\n        filePath: 'space.jpg',\n        compression: 1,\n        sizeBefore: 56,\n        sizeAfter: 10\n      }, {\n        id: '2',\n        filePath: 'space.jpg',\n        compression: 2,\n        sizeBefore: 32,\n        sizeAfter: 20\n      }, {\n        id: '3',\n        filePath: 'hotel_spot.jpg',\n        compression: 3,\n        sizeBefore: 30,\n        sizeAfter: 20\n      }],\n      active: false,\n      indexCount: 4,\n      imageProcessing: false,\n      currentImage: \"\",\n      currentCompressVal: 1,\n      loadingImage: false\n    };\n\n    _this.currentImageHandler = function (event) {\n      var filepath = event.target.value; //console.log('filepath',filepath);\n\n      _this.setState({\n        currentImage: filepath\n      }); //console.log('current image',this.state.currentImage);\n\n    };\n\n    _this.currentCompressValHandler = function (event) {\n      var compressVal = event.target.value; //console.log(compressVal)\n\n      _this.setState({\n        currentCompressVal: compressVal\n      }); //console.log(this.state.currentCompressVal)\n\n    };\n\n    _this.removeImageHandler = function (imageIndex) {\n      console.log('removing image');\n\n      var images = _toConsumableArray(_this.state.images);\n\n      images.splice(imageIndex, 1);\n\n      _this.setState({\n        images: images\n      });\n\n      console.log(_this.state.images);\n    };\n\n    _this.toggleImageModal = function () {\n      _this.setState({\n        imageProcessing: !_this.state.imageProcessing\n      });\n    };\n\n    _this.compressAndShowImage = function () {\n      _this.setState({\n        loadingImage: true\n      });\n\n      var images = _toConsumableArray(_this.state.images);\n\n      var id = _this.state.indexCount;\n      var filePath = _this.state.currentImage;\n      var compression = _this.state.currentCompressVal;\n\n      if (compression > 10) {\n        alert('Please pick a scaling factor between 1-10');\n        return;\n      }\n\n      var data = {\n        filePath: filePath,\n        compression: compression\n      };\n      axios.post('http://localhost:5000/compress', data).then(function (request) {\n        console.log(request);\n        console.log(request.data);\n        var fileSizeBefore = request.data.fileSizeBefore;\n        var fileSizeAfter = request.data.fileSizeAfter;\n        images.push({\n          id: id,\n          filePath: filePath,\n          compression: compression,\n          sizeBefore: fileSizeBefore,\n          sizeAfter: fileSizeAfter\n        });\n\n        _this.setState(function (prevState, props) {\n          return {\n            images: images,\n            indexCount: prevState.indexCount + 1,\n            imageProcessing: !prevState.imageProcessing,\n            loadingImage: false\n          };\n        });\n\n        console.log(_this.state.images);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImageManager, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Aux, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        loadingImage: this.state.loadingImage,\n        show: this.state.imageProcessing,\n        cancel: this.toggleImageModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(CompressProcess, {\n        loadingImage: this.state.loadingImage,\n        currentImage: this.currentImageHandler,\n        cancel: this.toggleImageModal,\n        confirm: this.compressAndShowImage,\n        currentCompress: this.currentCompressValHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classes.StartApp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"START OUR APPLICATION\"), React.createElement(\"button\", {\n        onClick: this.toggleImageModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"PRESS ME\")), React.createElement(ImageControl, {\n        images: this.state.images,\n        compress: this.UNSAFE_componentWillMount.currentCompressVal,\n        click: this.removeImageHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ImageManager;\n}(Component);\n\nexport default ImageManager;","map":{"version":3,"sources":["/Users/jennypham/Desktop/cmpt365/assignment2/src/containers/ImageManager/ImageManager.js"],"names":["React","Component","classes","Aux","ImageControl","Modal","CompressProcess","axios","ImageManager","state","images","id","filePath","compression","sizeBefore","sizeAfter","active","indexCount","imageProcessing","currentImage","currentCompressVal","loadingImage","currentImageHandler","event","filepath","target","value","setState","currentCompressValHandler","compressVal","removeImageHandler","imageIndex","console","log","splice","toggleImageModal","compressAndShowImage","alert","data","post","then","request","fileSizeBefore","fileSizeAfter","push","prevState","props","catch","error","StartApp","UNSAFE_componentWillMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport classes from './ImageManager.module.css';\nimport Aux from '../../hoc/Aux'\nimport ImageControl from '../../component/Image/ImageControls/ImageControl';\nimport Modal from '../../component/UI/Modal/Modal';\nimport CompressProcess from '../../component/Image/CompressProcess/CompressProcess';\nimport axios from 'axios';\nclass ImageManager extends Component{\n    state ={\n        images : [\n            {id:'1', filePath:'space.jpg', compression:1, sizeBefore:56, sizeAfter:10},\n            {id:'2', filePath:'space.jpg', compression:2, sizeBefore:32, sizeAfter:20},\n            {id:'3', filePath:'hotel_spot.jpg', compression:3, sizeBefore:30, sizeAfter:20}\n\n        ],\n        active: false,\n        indexCount:4,\n        imageProcessing:false,\n        currentImage: \"\",\n        currentCompressVal:1,\n        loadingImage:false,\n    }\n\n\n    currentImageHandler = (event)=>{\n        const filepath = event.target.value;\n        //console.log('filepath',filepath);\n        this.setState({currentImage: filepath});\n        //console.log('current image',this.state.currentImage);\n    } \n    \n    currentCompressValHandler = ( event ) =>{\n        const compressVal = event.target.value;\n        //console.log(compressVal)\n        this.setState({currentCompressVal: compressVal});\n        //console.log(this.state.currentCompressVal)\n    }\n\n    removeImageHandler = ( imageIndex ) =>{\n        console.log('removing image')\n        const images = [...this.state.images];\n        images.splice(imageIndex, 1);\n        this.setState({images:images})\n        console.log(this.state.images)\n\n    }\n\n    toggleImageModal = () =>{\n        this.setState({imageProcessing: !this.state.imageProcessing})\n    }\n\n    //returns a JSON object with filesize before/after, filepath, etc\n    \n\n    //This will be a HTTP request for image compression later\n    //Return: FILE SIZE- Before and After \n    compressAndShowImage = () =>{ \n        this.setState({loadingImage:true})\n        const images = [...this.state.images]\n        const id = this.state.indexCount\n        const filePath = this.state.currentImage;\n        const compression = this.state.currentCompressVal;\n        if(compression > 10){\n            alert('Please pick a scaling factor between 1-10');\n            return\n        }\n\n        const data = {\n            filePath: filePath,\n            compression:compression\n        }\n\n        axios.post('http://localhost:5000/compress', data).then(\n            (request) =>{\n                console.log(request);\n                console.log(request.data)\n                const fileSizeBefore = request.data.fileSizeBefore;\n                const fileSizeAfter = request.data.fileSizeAfter;\n                images.push({id:id, filePath:filePath, compression:compression,\n                    sizeBefore:fileSizeBefore, sizeAfter:fileSizeAfter});\n                \n                this.setState((prevState, props)=>{\n                    return{\n                        images:images,\n                        indexCount:prevState.indexCount + 1,\n                        imageProcessing:!prevState.imageProcessing,\n                        loadingImage:false\n                    }\n                })\n                console.log(this.state.images) \n            }).catch(\n                (error) => {\n                    console.log(error)\n                }\n            )\n        \n    }\n\n    render(){\n        return(\n            <Aux>\n                <Modal\n                loadingImage={this.state.loadingImage}\n                show={this.state.imageProcessing}\n                cancel={this.toggleImageModal}>\n                    <CompressProcess\n                    loadingImage={this.state.loadingImage}\n                    currentImage={this.currentImageHandler}\n                    cancel={this.toggleImageModal}\n                    confirm={this.compressAndShowImage}\n                    currentCompress={this.currentCompressValHandler}\n                    ></CompressProcess>\n                </Modal>\n                <div className={classes.StartApp}>\n                    <h1>START OUR APPLICATION</h1>\n                    <button onClick={this.toggleImageModal}>PRESS ME</button>\n                </div>\n                <ImageControl \n                images={this.state.images}\n                compress = {this.UNSAFE_componentWillMount.currentCompressVal}\n                click={this.removeImageHandler}\n                />\n            </Aux>\n        );\n    }\n}\n\nexport default ImageManager;\n"]},"metadata":{},"sourceType":"module"}